<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen de Práctica - Lógica Computacional</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .question {
            background: #f8f9fa;
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .question-type {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .question-header {
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 12px;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #e0e0e0;
        }

        .option:hover {
            background: #f0f0f0;
            border-color: #667eea;
        }

        .option input[type="radio"] {
            margin-right: 10px;
            cursor: pointer;
        }

        .text-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            margin-top: 10px;
        }

        .text-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .matching-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }

        .matching-column {
            background: white;
            padding: 15px;
            border-radius: 8px;
        }

        .matching-column h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 0.95em;
        }

        .matching-item {
            padding: 10px;
            margin-bottom: 8px;
            background: #f8f9fa;
            border-radius: 5px;
            border-left: 3px solid #667eea;
        }

        .matching-input {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            margin-bottom: 8px;
        }

        .matching-input input {
            width: 50px;
            padding: 6px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            display: block;
            margin: 30px auto;
            transition: transform 0.3s, box-shadow 0.3s;
            font-weight: bold;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .results {
            display: none;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
            text-align: center;
        }

        .results.show {
            display: block;
        }

        .score {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
        }

        .wrong-answers {
            background: white;
            color: #333;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: left;
        }

        .wrong-answer {
            padding: 15px;
            margin-bottom: 15px;
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            border-radius: 5px;
        }

        .correct-answer {
            color: #28a745;
            font-weight: bold;
            margin-top: 5px;
        }

        .retry-btn {
            background: white;
            color: #667eea;
            border: none;
            padding: 12px 30px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 20px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .retry-btn:hover {
            background: #f0f0f0;
            transform: scale(1.05);
        }

        .progress {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 1.1em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>📚 Examen de Práctica</h1>
        <p class="subtitle">Lógica Computacional</p>
        <div class="progress">40 Preguntas (Opción múltiple, Abiertas, Verdadero/Falso y Unión)</div>
        
        <form id="examForm">
            <!-- Las preguntas se generarán dinámicamente aquí -->
        </form>

        <button type="button" class="submit-btn" onclick="submitExam()">Enviar Examen</button>

        <div class="results" id="results">
            <h2>Resultados del Examen</h2>
            <div class="score" id="score"></div>
            <p id="message"></p>
            <div class="wrong-answers" id="wrongAnswers"></div>
            <button class="retry-btn" onclick="location.reload()">Realizar de Nuevo</button>
        </div>
    </div>

    <script>
        const questions = [
            // Opción Múltiple
            {type: "multiple", q: "¿Cuál es el equivalente decimal del número binario 1010?", opts: ["8", "10", "12", "14"], ans: 1},
            {type: "multiple", q: "¿Cuántos bits hay en un byte?", opts: ["4", "8", "16", "32"], ans: 1},
            {type: "multiple", q: "El número binario 1111 equivale a:", opts: ["15", "16", "14", "13"], ans: 0},
            {type: "multiple", q: "¿Qué base numérica utiliza el sistema decimal?", opts: ["Base 2", "Base 8", "Base 10", "Base 16"], ans: 2},
            {type: "multiple", q: "¿Qué letra en hexadecimal representa el número 10?", opts: ["A", "B", "C", "D"], ans: 0},
            {type: "multiple", q: "En la operación OR, el resultado de 1 OR 0 es:", opts: ["0", "1", "Indefinido", "Depende"], ans: 1},
            {type: "multiple", q: "En la operación AND, el resultado de 1 AND 1 es:", opts: ["0", "1", "2", "Indefinido"], ans: 1},
            {type: "multiple", q: "La operación NOT de 1 es:", opts: ["1", "0", "NULL", "Indefinido"], ans: 1},
            {type: "multiple", q: "Un chip 7404 contiene:", opts: ["4 compuertas NOT", "6 compuertas NOT", "8 compuertas NOT", "2 compuertas NOT"], ans: 1},
            {type: "multiple", q: "Un chip 7408 contiene compuertas:", opts: ["OR", "AND", "NOT", "NAND"], ans: 1},
            {type: "multiple", q: "Un chip 7432 contiene compuertas:", opts: ["OR", "AND", "NOT", "XOR"], ans: 0},
            {type: "multiple", q: "La unidad de medida de la resistencia es:", opts: ["Voltio", "Amperio", "Ohmio", "Watt"], ans: 2},
            {type: "multiple", q: "LED significa:", opts: ["Light Emitting Diode", "Light Energy Device", "Low Energy Diode", "Light Electric Device"], ans: 0},
            
            // Preguntas Cerradas (Verdadero/Falso)
            {type: "truefalse", q: "El sistema binario utiliza únicamente los dígitos 0 y 1", ans: "V"},
            {type: "truefalse", q: "El número hexadecimal FF equivale a 256 en decimal", ans: "F"},
            {type: "truefalse", q: "La compuerta OR da resultado 1 solo cuando ambas entradas son 1", ans: "F"},
            {type: "truefalse", q: "La compuerta AND requiere que ambas entradas sean 1 para dar resultado 1", ans: "V"},
            {type: "truefalse", q: "La compuerta NOT invierte el valor de entrada", ans: "V"},
            {type: "truefalse", q: "En álgebra booleana, A + 0 = A", ans: "V"},
            {type: "truefalse", q: "En álgebra booleana, A · 0 = A", ans: "F"},
            {type: "truefalse", q: "Una resistencia sirve para limitar la corriente en un circuito", ans: "V"},
            {type: "truefalse", q: "Un LED puede conectarse directamente a una batería sin resistencia", ans: "F"},
            {type: "truefalse", q: "El LED tiene polaridad y debe conectarse correctamente", ans: "V"},
            {type: "truefalse", q: "Una protoboard permite soldar componentes permanentemente", ans: "F"},
            {type: "truefalse", q: "DIP significa Dual Inline Package", ans: "V"},
            {type: "truefalse", q: "El chip 7404 contiene compuertas AND", ans: "F"},
            
            // Preguntas Abiertas
            {type: "open", q: "Convierte el número binario 11001 a decimal", ans: "25"},
            {type: "open", q: "¿Cuál es el resultado de la operación 1 OR 1?", ans: "1"},
            {type: "open", q: "¿Cuál es el resultado de la operación 0 AND 0?", ans: "0"},
            {type: "open", q: "Escribe el número decimal 10 en binario (sin espacios)", ans: "1010"},
            {type: "open", q: "¿Qué símbolo se usa para representar la operación NOT? (escribe: ', negacion, o barra)", ans: ["'", "negacion", "barra"]},
            {type: "open", q: "¿Cuántas compuertas NOT tiene un chip 7404?", ans: "6"},
            {type: "open", q: "Escribe el número hexadecimal que representa el decimal 15", ans: "f"},
            
            // Preguntas de Unión/Emparejamiento
            {
                type: "matching",
                q: "Relaciona cada sistema numérico con su base correspondiente:",
                pairs: [
                    {left: "A. Binario", right: "1. Base 10"},
                    {left: "B. Decimal", right: "2. Base 2"},
                    {left: "C. Hexadecimal", right: "3. Base 16"}
                ],
                ans: {"A": "2", "B": "1", "C": "3"}
            },
            {
                type: "matching",
                q: "Relaciona cada compuerta con su chip correspondiente:",
                pairs: [
                    {left: "A. NOT", right: "1. 7432"},
                    {left: "B. AND", right: "2. 7404"},
                    {left: "C. OR", right: "3. 7408"}
                ],
                ans: {"A": "2", "B": "3", "C": "1"}
            },
            {
                type: "matching",
                q: "Relaciona cada operación lógica con su resultado:",
                pairs: [
                    {left: "A. 1 AND 0", right: "1. 1"},
                    {left: "B. 1 OR 0", right: "2. 0"},
                    {left: "C. NOT 1", right: "3. 1"}
                ],
                ans: {"A": "2", "B": "1", "C": "2"}
            },
            {
                type: "matching",
                q: "Relaciona cada componente con su función:",
                pairs: [
                    {left: "A. Resistencia", right: "1. Emite luz"},
                    {left: "B. LED", right: "2. Limita corriente"},
                    {left: "C. Protoboard", right: "3. Hacer prototipos"}
                ],
                ans: {"A": "2", "B": "1", "C": "3"}
            },
            {
                type: "matching",
                q: "Relaciona cada conversión binaria con su equivalente decimal:",
                pairs: [
                    {left: "A. 1000", right: "1. 15"},
                    {left: "B. 1111", right: "2. 7"},
                    {left: "C. 0111", right: "3. 8"}
                ],
                ans: {"A": "3", "B": "1", "C": "2"}
            },
            {
                type: "matching",
                q: "Relaciona cada símbolo de compuerta con su nombre correcto:",
                pairs: [
                    {left: "A. —▷o— (triángulo + círculo pequeño)", right: "1. AND"},
                    {left: "B. —D— (semicírculo en un lado)", right: "2. NOT"},
                    {left: "C. =𝕯- (curva con punta)", right: "3. OR"}
                ],
                ans: {"A": "2", "B": "1", "C": "3"}
            }
        ];

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function generateExam() {
            const form = document.getElementById('examForm');
            const shuffledQuestions = shuffle([...questions]);
            
            shuffledQuestions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                
                let typeLabel = '';
                let questionHTML = '';
                
                if (question.type === 'multiple') {
                    typeLabel = 'Opción Múltiple';
                    let optionsHTML = '';
                    question.opts.forEach((opt, optIndex) => {
                        optionsHTML += `
                            <label class="option">
                                <input type="radio" name="q${index}" value="${optIndex}" required>
                                <span>${opt}</span>
                            </label>
                        `;
                    });
                    questionHTML = `<div class="options">${optionsHTML}</div>`;
                    
                } else if (question.type === 'truefalse') {
                    typeLabel = 'Verdadero o Falso';
                    questionHTML = `
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q${index}" value="V" required>
                                <span>Verdadero</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q${index}" value="F" required>
                                <span>Falso</span>
                            </label>
                        </div>
                    `;
                    
                } else if (question.type === 'open') {
                    typeLabel = 'Pregunta Abierta';
                    questionHTML = `
                        <input type="text" class="text-input" name="q${index}" placeholder="Escribe tu respuesta aquí..." required>
                    `;
                    
                } else if (question.type === 'matching') {
                    typeLabel = 'Unión/Emparejamiento';
                    let pairsHTML = '<div class="matching-container">';
                    pairsHTML += '<div class="matching-column"><h4>Columna A:</h4>';
                    question.pairs.forEach(pair => {
                        pairsHTML += `<div class="matching-item">${pair.left}</div>`;
                    });
                    pairsHTML += '</div><div class="matching-column"><h4>Columna B:</h4>';
                    question.pairs.forEach(pair => {
                        pairsHTML += `<div class="matching-item">${pair.right}</div>`;
                    });
                    pairsHTML += '</div></div>';
                    
                    pairsHTML += '<div style="margin-top: 15px;"><strong>Escribe tus respuestas:</strong></div>';
                    Object.keys(question.ans).forEach(letter => {
                        pairsHTML += `
                            <div class="matching-input">
                                <strong>${letter} =</strong>
                                <input type="text" name="q${index}_${letter}" maxlength="1" required>
                            </div>
                        `;
                    });
                    
                    questionHTML = pairsHTML;
                }
                
                questionDiv.innerHTML = `
                    <span class="question-type">${typeLabel}</span>
                    <div class="question-header">${index + 1}. ${question.q}</div>
                    ${questionHTML}
                `;
                
                form.appendChild(questionDiv);
            });
        }

        function normalizeAnswer(answer) {
            if (typeof answer === 'string') {
                return answer.toLowerCase().trim().replace(/\s+/g, '');
            }
            return answer;
        }

        function submitExam() {
            const form = document.getElementById('examForm');
            const formData = new FormData(form);
            
            let correct = 0;
            let wrongAnswers = [];
            
            const shuffledQuestions = Array.from(document.querySelectorAll('.question')).map((elem, index) => {
                const questionText = elem.querySelector('.question-header').textContent.split('. ')[1];
                const originalQuestion = questions.find(q => q.q === questionText);
                return originalQuestion;
            });
            
            shuffledQuestions.forEach((question, index) => {
                let isCorrect = false;
                let userAnswer = '';
                let correctAnswer = '';
                
                if (question.type === 'multiple') {
                    const answer = parseInt(formData.get(`q${index}`));
                    userAnswer = question.opts[answer];
                    correctAnswer = question.opts[question.ans];
                    isCorrect = answer === question.ans;
                    
                } else if (question.type === 'truefalse') {
                    userAnswer = formData.get(`q${index}`);
                    correctAnswer = question.ans;
                    isCorrect = userAnswer === question.ans;
                    userAnswer = userAnswer === 'V' ? 'Verdadero' : 'Falso';
                    correctAnswer = correctAnswer === 'V' ? 'Verdadero' : 'Falso';
                    
                } else if (question.type === 'open') {
                    userAnswer = normalizeAnswer(formData.get(`q${index}`));
                    const expectedAnswers = Array.isArray(question.ans) ? 
                        question.ans.map(a => normalizeAnswer(a)) : 
                        [normalizeAnswer(question.ans)];
                    
                    isCorrect = expectedAnswers.includes(userAnswer);
                    correctAnswer = Array.isArray(question.ans) ? question.ans.join(' o ') : question.ans;
                    
                } else if (question.type === 'matching') {
                    let allCorrect = true;
                    let userAnswerStr = '';
                    let correctAnswerStr = '';
                    
                    Object.keys(question.ans).forEach(letter => {
                        const userVal = formData.get(`q${index}_${letter}`);
                        userAnswerStr += `${letter}=${userVal} `;
                        correctAnswerStr += `${letter}=${question.ans[letter]} `;
                        
                        if (userVal !== question.ans[letter]) {
                            allCorrect = false;
                        }
                    });
                    
                    isCorrect = allCorrect;
                    userAnswer = userAnswerStr.trim();
                    correctAnswer = correctAnswerStr.trim();
                }
                
                if (isCorrect) {
                    correct++;
                } else {
                    wrongAnswers.push({
                        num: index + 1,
                        question: question.q,
                        userAnswer: userAnswer,
                        correctAnswer: correctAnswer
                    });
                }
            });
            
            const score = Math.round((correct / questions.length) * 100);
            
            document.getElementById('score').textContent = score + ' / 100';
            
            let message = '';
            if (score >= 90) message = '¡Excelente! 🎉 Dominas el tema';
            else if (score >= 70) message = '¡Muy bien! 👍 Buen trabajo';
            else if (score >= 60) message = 'Aprobado ✓ Sigue practicando';
            else message = 'Necesitas estudiar más 📚';
            
            document.getElementById('message').textContent = message;
            
            const wrongAnswersDiv = document.getElementById('wrongAnswers');
            if (wrongAnswers.length > 0) {
                wrongAnswersDiv.innerHTML = `<h3>Respuestas Incorrectas: (${wrongAnswers.length})</h3>`;
                wrongAnswers.forEach(wrong => {
                    wrongAnswersDiv.innerHTML += `
                        <div class="wrong-answer">
                            <strong>Pregunta ${wrong.num}:</strong> ${wrong.question}<br>
                            <span style="color: #dc3545;">Tu respuesta: ${wrong.userAnswer}</span><br>
                            <span class="correct-answer">✓ Respuesta correcta: ${wrong.correctAnswer}</span>
                        </div>
                    `;
                });
            } else {
                wrongAnswersDiv.innerHTML = '<h3>¡Perfecto! Todas las respuestas correctas 🌟</h3>';
            }
            
            document.getElementById('results').classList.add('show');
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }

        generateExam();
    </script>
</body>
</html>
